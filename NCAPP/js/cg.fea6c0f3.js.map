{"version":3,"sources":["webpack:///./src/views/cg/index.vue?e6be","webpack:///./src/lib/conjugate_grad.ts","webpack:///./src/views/cg/index.vue?310c","webpack:///./src/views/cg/index.vue?6d9b","webpack:///./src/views/cg/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","margin-top","attrs","header","lead","_v","variant","href","bg-variant","staticClass","label-cols-lg","label","label-size","label-class","label-cols-sm","label-align-sm","label-for","id","rows","max-rows","model","value","data","callback","$$v","$set","expression","margin-bottom","on","click","compute","formula","osolution","staticRenderFns","conjugate_grad","A","b","x","n","size","undefined","vector","setOne","r","mulVec","sub","p","mul","r_k_norm","dot","_i","Ap","alpha","iadd","r_kplus1_norm","beta","vmj","__webpack_require__","vue_property_decorator","use","cgvue_type_script_lang_ts_CG","_Vue","CG","_this","Object","classCallCheck","row","col","inherits","createClass","key","out_formula","d_b","split","length","m_A_array","m_A","matrix","v_b","i","A_array","j","setDataByIndexs","toString","setAt","initFormula","result","out_solution","index","element","at","tslib_es6","cgvue_type_script_lang_ts_","views_cgvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/cg.fea6c0f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{staticStyle:{\"margin-top\":\"50px\"}},[_c('b-jumbotron',{attrs:{\"header\":\"Conjugate Gradient Method\",\"lead\":\"Conjugate Gradient Method Demo\"}},[_c('p',[_vm._v(\"developed by Xu.Wang\")]),_c('b-btn',{attrs:{\"variant\":\"primary\",\"href\":\"https://github.com/RaymondMcGuire/TUT2019-Numerical-Computation\"}},[_vm._v(\"\\n      Source code\\n    \")])],1),_c('b-card',{attrs:{\"bg-variant\":\"light jumbotron\"}},[_c('b-form-group',{staticClass:\"mb-0\",attrs:{\"label-cols-lg\":\"3\",\"label\":\"Input Parameters\",\"label-size\":\"lg\",\"label-class\":\"font-weight-bold pt-0\"}},[_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"Matrix A:\",\"label-align-sm\":\"right\",\"label-for\":\"MatrixA\"}},[_c('b-form-textarea',{attrs:{\"id\":\"MatrixA\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.data.A),callback:function ($$v) {_vm.$set(_vm.data, \"A\", $$v)},expression:\"data.A\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"Vector b:\",\"label-align-sm\":\"right\",\"label-for\":\"Vectorb\"}},[_c('b-form-textarea',{attrs:{\"id\":\"Vectorb\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.data.b),callback:function ($$v) {_vm.$set(_vm.data, \"b\", $$v)},expression:\"data.b\"}})],1)],1)],1),_c('b-card',{staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"bg-variant\":\"light text-center\"}},[_c('b-btn',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.compute}},[_vm._v(\"\\n      Solve Equation System\\n    \")])],1),_c('b-card',{attrs:{\"bg-variant\":\"light jumbotron\"}},[_c('b-form-group',{staticClass:\"mb-0\",attrs:{\"label-cols-lg\":\"3\",\"label\":\"Output\",\"label-size\":\"lg\",\"label-class\":\"font-weight-bold pt-0\"}},[_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"Equation System:\",\"label-align-sm\":\"right\",\"label-for\":\"oformula\"}},[_c('vue-mathjax',{attrs:{\"id\":\"oformula\",\"formula\":_vm.data.formula}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"Solutions:\",\"label-align-sm\":\"right\",\"label-for\":\"osolution\"}},[_c('vue-mathjax',{attrs:{\"id\":\"osolution\",\"formula\":_vm.data.osolution}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Matrix } from './matrix'\r\nimport { SparseMatrix } from './sparse_matrix'\r\nimport { Vector } from './vector'\r\n/* =========================================================================\r\n *\r\n *  conjugate_grad.ts\r\n *  Solve a linear equation Ax = b with conjugate gradient method.\r\n *\r\n *  Parameters\r\n *  ----------\r\n *  A: 2d positive semi-definite (symmetric) matrix\r\n *  b: 1d array\r\n *  x: 1d array of initial point\r\n *\r\n *  Return\r\n *  ----------\r\n *  1d array x such that Ax = b\r\n * ========================================================================= */\r\nexport function conjugate_grad(A: Matrix, b: Vector, x?: Vector) {\r\n  // TODO:judge A is a \"positive semi-definite matrix\", tip:using \"Cholesky decomposition\"\r\n\r\n  let n = b.size()\r\n  if (x === undefined) {\r\n    x = new Vector(b.size())\r\n    x.setOne()\r\n  }\r\n\r\n  let r = A.mulVec(x).sub(b)\r\n  let p = r.mul(-1)\r\n  let r_k_norm = r.dot(r)\r\n\r\n  for (var _i = 0; _i < 2 * n; _i++) {\r\n    let Ap = A.mulVec(p)\r\n    let alpha = r_k_norm / p.dot(Ap)\r\n    x.iadd(p.mul(alpha))\r\n    r.iadd(Ap.mul(alpha))\r\n    let r_kplus1_norm = r.dot(r)\r\n    let beta = r_kplus1_norm / r_k_norm\r\n    r_k_norm = r_kplus1_norm\r\n    if (r_kplus1_norm < 1e-5) {\r\n      // console.log('compute finished!');\r\n      break\r\n    }\r\n    p = p.mul(beta).sub(r)\r\n  }\r\n  return x\r\n}\r\n\r\nexport function conjugate_grad_spMatrix(A: SparseMatrix, b: Vector, x?: Vector) {\r\n  // TODO:judge A is a \"positive semi-definite matrix\", tip:using \"Cholesky decomposition\"\r\n\r\n  let n = b.size()\r\n  if (x === undefined) {\r\n    x = new Vector(b.size())\r\n    x.setOne()\r\n  }\r\n\r\n  let r = A.mulVec(x).sub(b)\r\n  let p = r.mul(-1)\r\n  let r_k_norm = r.dot(r)\r\n\r\n  for (var _i = 0; _i < 2 * n; _i++) {\r\n    let Ap = A.mulVec(p)\r\n    let alpha = r_k_norm / p.dot(Ap)\r\n    x.iadd(p.mul(alpha))\r\n    r.iadd(Ap.mul(alpha))\r\n    let r_kplus1_norm = r.dot(r)\r\n    let beta = r_kplus1_norm / r_k_norm\r\n    r_k_norm = r_kplus1_norm\r\n    if (r_kplus1_norm < 1e-5) {\r\n      // console.log('compute finished!');\r\n      break\r\n    }\r\n    p = p.mul(beta).sub(r)\r\n  }\r\n  return x\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { Matrix } from '@/lib/matrix'\r\nimport { conjugate_grad } from '@/lib/conjugate_grad'\r\nimport { Vector } from '../../lib/vector'\r\n\r\nconst vmj = require('vue-mathjax')\r\nVue.use(vmj)\r\n\r\n@Component\r\nexport default class CG extends Vue {\r\n      private data = {\r\n        A: '4, 1\\n1, 3',\r\n        b: '1\\n2',\r\n        row: 0,\r\n        col: 0,\r\n        formula: '',\r\n        osolution: ''\r\n      }\r\n\r\n      private m_A : any\r\n      private v_b : any\r\n\r\n      mounted() {\r\n        this.compute()\r\n      }\r\n\r\n      initFormula() {\r\n        let out_formula = '$$\\\\left\\\\{\\\\begin{array}{c}'\r\n\r\n        let d_b = this.data.b.split('\\n')\r\n        this.data.row = d_b.length\r\n        let m_A_array = this.data.A.split('\\n')\r\n        this.data.col = m_A_array[0].split(',').length\r\n        this.m_A = new Matrix(this.data.row, this.data.col)\r\n        this.v_b = new Vector(this.data.row)\r\n\r\n        for (let i = 0; i < this.data.row; i++) {\r\n          let A_array = m_A_array[i].split(',')\r\n\r\n          for (let j = 0; j < this.data.col; j++) {\r\n            let value = +A_array[j]\r\n            this.m_A.setDataByIndexs(i, j, value)\r\n\r\n            out_formula += value.toString() + 'x_' + (j + 1).toString()\r\n            if (j === this.data.col - 1) { out_formula += '= &' } else { out_formula += '+' }\r\n          }\r\n          // this.m_A.setDataByIndexs(i, this.data.col, +v_b[i])\r\n          this.v_b.setAt(i, +d_b[i])\r\n          out_formula += d_b[i] + '\\\\\\\\'\r\n        }\r\n        out_formula += '\\\\end{array}\\\\right.$$'\r\n        this.data.formula = out_formula\r\n      }\r\n\r\n      compute() {\r\n        this.initFormula()\r\n        let result = conjugate_grad(this.m_A, this.v_b)\r\n\r\n        let out_solution = '$$'\r\n        for (let index = 0; index < result.size(); index++) {\r\n          const element = result.at(index)\r\n          out_solution += 'x_' + (index + 1).toString() + '=' + element.toString() + '\\\\\\\\'\r\n        }\r\n        out_solution += '$$'\r\n        this.data.osolution = out_solution\r\n      }\r\n}\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e170d41c&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}